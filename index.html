<!DOCTYPE html>
<html lang="en">
    <style type="text/css">

    html{
      font-family: Helvetica, sans-serif;
      font-size: 12px;
    }

    svg{
      padding: 30px;
    }

    h2{
      font-family: Helvetica, sans-serif;
      font-size: 14px;
    }

    ul{
      list-style-type: none;
    }

      .yaxis path,

      .yaxis line {
          fill: none;
          stroke: black;
          shape-rendering: crispEdges;
      }

      .yaxis text {
          fill: #333;
          font-family: sans-serif;
          font-size: 10px;
      }

      .xaxis path,

      .xaxis line {
          fill: none;
          stroke: black;
          shape-rendering: crispEdges;
        }

      .xaxis text {
          fill: #333;
          font-family: sans-serif;
          font-size: 10px;
      }        

      .gold {
          fill: #C98910;
          opacity: 0.7;
      }

      .silver {
          fill: #A8A8A8;
          opacity: 0.7;
      }

      .bronze {
          fill: #965A38;
          opacity: 0.7;
      }

</style>

<head>
    <meta charset="utf-8">

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

</head>

<body>

<h2>Event</h2>
        <ul id="Event">
          <li><label><input type="radio" name="radio" value="FiveHundredMen">500m Men</label></li>
          <li><label><input type="radio" name="radio" value="FiveHundredWomen">500m Women</label></li>
          <li><label><input type="radio" name="radio" value="OneThousandMen">1000m Men</label></li>
          <li><label><input type="radio" name="radio" value="OneThousandWomen">1000m Women</label></li>
          <li><label><input type="radio" name="radio" value="FifteenHundredMen">1500m Men</label></li>
          <li><label><input type="radio" name="radio" value="FifteenHundredWomen">1500m Women</label></li>
          <li><label><input type="radio" name="radio" value="ThreeThousandWomen">3000m Women</label></li>
          <li><label><input type="radio" name="radio" value="FiveThousandMen">5000m Men</label></li>
          <li><label><input type="radio" name="radio" value="FiveThousandWomen">5000m Women</label></li>
          <li><label><input type="radio" name="radio" value="TenThousandMen">10000m Men</label></li>

<script type="text/javascript">


var margin = {top: 20, right: 20, bottom: 20, left: 20};
     width = 960 - margin.left - margin.right,
     height = 600 - margin.top - margin.bottom;

var html = d3.select("body");

d3.csv("dataclean.csv", function(error, data){

          var FiveHundredMen = d3.selectAll("input[value=FiveHundredMen]")
              .on("click", function() {
              draw("500m Men")
            })

          var FiveHundredWomen = d3.selectAll("input[value=FiveHundredWomen]")
              .on("click", function() {
              draw("500m Women")
            })

          var OneThousandMen = d3.selectAll("input[value=OneThousandMen]")
              .on("click", function() {
              draw("1000m Men")
            })

          var OneThousandWomen = d3.selectAll("input[value=OneThousandWomen]")
              .on("click", function() {
              draw("1000m Women")
            })

          var FifteenHundredMen = d3.selectAll("input[value=FifteenHundredMen]")
              .on("click", function() {
              draw("1500m Men")
            })

          var FifteenHundredWomen = d3.selectAll("input[value=FifteenHundredWomen]")
            .on("click", function() {
            draw("1500m Women")
          })

          var ThreeThousandWomen = d3.selectAll("input[value=ThreeThousandWomen]")
            .on("click", function() {
            draw("3000m Women")
          })

          var FiveThousandMen = d3.selectAll("input[value=FiveThousandMen]")
            .on("click", function() {
            draw("5000m Men")
          })

          var FiveThousandWomen = d3.selectAll("input[value=FiveThousandWomen]")
            .on("click", function() {
            draw("5000m Women")
          })

          var TenThousandMen = d3.selectAll("input[value=TenThousandMen]")
            .on("click", function() {
            draw("10000m Men")
          })


  var buttonGroup = html.append("div");

  var button1 = buttonGroup.append("button")
    .text("button1")
    .on("click", function() {
      draw("1500m Men")
    })

  var button2 = buttonGroup.append("button")
    .text("button2")
    .on("click", function() {
      draw("500m Men")
    })

  var svg = html.append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  data.forEach(function(d) { 
    d.Year = +d.Year,
    d.Altitude = +d.Altitude,
    d.totalseconds = +d.totalseconds
  });

  var xScale = d3.scale.linear()
      .domain([1920, 2014])
      .range([0, width]);

  var yScale = d3.scale.linear()
      .range([0, height]);

  var dataByEvent = d3.nest()
      .key(function(d) { return d.Event; })
      .map(data);

  var xAxis = d3.svg.axis()
    .scale(xScale)
    .tickFormat(d3.format("d"))
    .tickValues([1924, 1928, 1932, 1936, 1948, 1952, 1956, 1960, 1964, 1968, 1972, 1976, 1980, 1984, 1988, 1992, 1994, 1998, 2002, 2006, 2010, 2014]);

  svg.append("g")
      .attr("class", "xaxis")  //Assign "xaxis" class
      .call(xAxis)
      .attr("transform", "translate(0," + (height) + ")");

  var yAxis = d3.svg.axis()
    .scale(yScale)
    .orient("left");

  svg.append("g")
    .attr("class", "yaxis")
    .call(yAxis);


  function draw(currentEvent) {
    console.log(currentEvent);

    var currentEventData = dataByEvent[currentEvent];

    yScale.domain([d3.min(currentEventData, function(d) { return d.totalseconds}), d3.max(currentEventData, function(d) { return d.totalseconds})]);

    var circles = svg.selectAll("circle")
        .data(currentEventData)

    circles.enter()
        .append("circle")
        .classed("bronze", function(d) { return d.Medal == "BRONZE"; })
        .classed("silver", function(d) { return d.Medal == "SILVER"; })
        .classed("gold", function(d) { return d.Medal == "GOLD"; });

    svg.select(".yaxis")
        .transition()
        .duration(1000).ease("exp-in-out")
        .call(yAxis)

    circles.exit()
        .remove();
        
    circles.transition()
        .duration(1000)
        .ease("exp-in-out")
        .attr('r', "5")
        .attr('cx', function(d){ return xScale(d.Year); })
        .attr('cy', function(d){ return height - yScale(d.totalseconds); })
        .attr('stroke', 'darkgray');



    console.log(d.Medal)
  }

});

</script>
</body>
